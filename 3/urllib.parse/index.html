<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>urllib.parse — Split URLs into Components &mdash; PyMOTW 3</title>

    <link rel="stylesheet" href="../_static/pure-min.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/font-awesome/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pymotw.css" type="text/css">

    <link rel="shortcut icon" type="image/png" href="../_static/favicon.png">

    <link rel="alternate" type="application/atom+xml"
          title="Doug Hellmann"
          href="https://feeds.feedburner.com/DougHellmann" />
    <link rel="alternate" type="application/atom+xml"
          title="PyMOTW Updates"
          href="https://feeds.feedburner.com/PyMOTW" />

    <meta name="verify-v1" content="5saTcOa2HLac4V85yUg3SARfun1PqT5Upu7IR/6fpv4="/>

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@pymotw" />
    <meta name="twitter:title" content="urllib.parse — Split URLs into Components" />
    <meta name="twitter:image" content="https://pymotw.com/3/_static/logo-large.png" />

  </head>
  <body>

    <div class="pure-menu pure-menu-open pure-menu-horizontal" id="site-menu">
      <a class="pure-menu-heading" href="../index.html"><img src="../_static/logo.png"> PyMOTW-3</a>

      <ul id="top-menu">
        <li class="pure-menu-selected"><a href="../py-modindex.html"><i class="fa fa-list fa-lg"></i> Module Index</a></li>
        <li class="pure-menu-selected"><a href="../genindex.html"><i class="fa fa-italic fa-lg"></i> Index</a></li>
        <li class="pure-menu-selected"><a class="sociallink" href="http://www.twitter.com/pymotw"
       title="Twitter">
      <i class="fa fa-twitter fa-lg"></i></a></a>
        <li class="pure-menu-selected"><a class="sociallink" href="https://feeds.feedburner.com/PyMOTW"
       title="Subscribe via RSS">
      <i class="fa fa-rss-square fa-lg"></i></a></li>
      </ul>

    </div>

    <div class="pure-menu pure-menu-open pure-menu-vertical" id="breadcrumbs-menu">
      
      <ul id="breadcrumbs">
        <li class="pure-menu-selected"><a href="../internet_protocols.html"><i class="fa fa-arrow-circle-up"></i> The Internet</a></li>
      </ul>
    </div>

    <div class="pure-g-r" id="content-container">

      <div class="pure-u-3-4">
        <div class="content">
          
  <div class="section" id="module-urllib.parse">
<span id="urllib-parse-split-urls-into-components"></span><h1>urllib.parse — Split URLs into Components<a class="headerlink" href="#module-urllib.parse" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Purpose:</th><td class="field-body">Split URL into components</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">urllib.parse</span></code> module provides functions for manipulating
URLs and their component parts, to either break them down or build
them up.</p>
<div class="section" id="parsing">
<h2>Parsing<a class="headerlink" href="#parsing" title="Permalink to this headline">¶</a></h2>
<p>The return value from the <code class="docutils literal notranslate"><span class="pre">urlparse()</span></code> function is a
<code class="docutils literal notranslate"><span class="pre">ParseResult</span></code> object that acts like a <code class="docutils literal notranslate"><span class="pre">tuple</span></code> with six
elements.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">urllib_parse_urlparse.py</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">urlparse</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://netloc/path;param?query=arg#frag&#39;</span>
<span class="n">parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parsed</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The parts of the URL available through the tuple interface are the
scheme, network location, path, path segment parameters (separated
from the path by a semicolon), query, and fragment.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 urllib_parse_urlparse.py

ParseResult(scheme=&#39;http&#39;, netloc=&#39;netloc&#39;, path=&#39;/path&#39;,
params=&#39;param&#39;, query=&#39;query=arg&#39;, fragment=&#39;frag&#39;)
</pre></div>
</div>
<p>Although the return value acts like a tuple, it is really based on a
<code class="docutils literal notranslate"><span class="pre">namedtuple</span></code>, a subclass of <code class="docutils literal notranslate"><span class="pre">tuple</span></code> that supports
accessing the parts of the URL via named attributes as well as
indexes.  In addition to being easier to use for the programmer, the
attribute API also offers access to several values not available in
the <code class="docutils literal notranslate"><span class="pre">tuple</span></code> API.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">urllib_parse_urlparseattrs.py</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">urlparse</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://user:pwd@NetLoc:80/path;param?query=arg#frag&#39;</span>
<span class="n">parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;scheme  :&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">scheme</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;netloc  :&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;path    :&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;params  :&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;query   :&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;fragment:&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">fragment</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;username:&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;password:&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hostname:&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">hostname</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;port    :&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">port</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">username</span></code> and <code class="docutils literal notranslate"><span class="pre">password</span></code> are available when present in the input
URL, and set to <code class="docutils literal notranslate"><span class="pre">None</span></code> when not. The <code class="docutils literal notranslate"><span class="pre">hostname</span></code> is the same value as
<code class="docutils literal notranslate"><span class="pre">netloc</span></code>, in all lower case and with the port value stripped.  And the
<code class="docutils literal notranslate"><span class="pre">port</span></code> is converted to an integer when present and <code class="docutils literal notranslate"><span class="pre">None</span></code> when not.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 urllib_parse_urlparseattrs.py

scheme  : http
netloc  : user:pwd@NetLoc:80
path    : /path
params  : param
query   : query=arg
fragment: frag
username: user
password: pwd
hostname: netloc
port    : 80
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">urlsplit()</span></code> function is an alternative to
<code class="docutils literal notranslate"><span class="pre">urlparse()</span></code>. It behaves a little differently, because it does not
split the parameters from the URL. This is useful for URLs following
<span class="target" id="index-0"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2396.html"><strong>RFC 2396</strong></a>, which supports parameters for each segment of the path.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">urllib_parse_urlsplit.py</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">urlsplit</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://user:pwd@NetLoc:80/p1;para/p2;para?query=arg#frag&#39;</span>
<span class="n">parsed</span> <span class="o">=</span> <span class="n">urlsplit</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parsed</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;scheme  :&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">scheme</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;netloc  :&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;path    :&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;query   :&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;fragment:&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">fragment</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;username:&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;password:&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hostname:&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">hostname</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;port    :&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">port</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Since the parameters are not split out, the tuple API will show five
elements instead of six, and there is no <code class="docutils literal notranslate"><span class="pre">params</span></code> attribute.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 urllib_parse_urlsplit.py

SplitResult(scheme=&#39;http&#39;, netloc=&#39;user:pwd@NetLoc:80&#39;,
path=&#39;/p1;para/p2;para&#39;, query=&#39;query=arg&#39;, fragment=&#39;frag&#39;)
scheme  : http
netloc  : user:pwd@NetLoc:80
path    : /p1;para/p2;para
query   : query=arg
fragment: frag
username: user
password: pwd
hostname: netloc
port    : 80
</pre></div>
</div>
<p>To simply strip the fragment identifier from a URL, such as when
finding a base page name from a URL, use <code class="docutils literal notranslate"><span class="pre">urldefrag()</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">urllib_parse_urldefrag.py</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">urldefrag</span>

<span class="n">original</span> <span class="o">=</span> <span class="s1">&#39;http://netloc/path;param?query=arg#frag&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;original:&#39;</span><span class="p">,</span> <span class="n">original</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">urldefrag</span><span class="p">(</span><span class="n">original</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;url     :&#39;</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;fragment:&#39;</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">fragment</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The return value is a <code class="docutils literal notranslate"><span class="pre">DefragResult</span></code>, based on
<code class="docutils literal notranslate"><span class="pre">namedtuple</span></code>, containing the base URL and the fragment.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 urllib_parse_urldefrag.py

original: http://netloc/path;param?query=arg#frag
url     : http://netloc/path;param?query=arg
fragment: frag
</pre></div>
</div>
</div>
<div class="section" id="unparsing">
<h2>Unparsing<a class="headerlink" href="#unparsing" title="Permalink to this headline">¶</a></h2>
<p>There are several ways to assemble the parts of a split URL back
together into a single string. The parsed URL object has a
<code class="docutils literal notranslate"><span class="pre">geturl()</span></code> method.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">urllib_parse_geturl.py</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">urlparse</span>

<span class="n">original</span> <span class="o">=</span> <span class="s1">&#39;http://netloc/path;param?query=arg#frag&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ORIG  :&#39;</span><span class="p">,</span> <span class="n">original</span><span class="p">)</span>
<span class="n">parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">original</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;PARSED:&#39;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">geturl</span><span class="p">())</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">geturl()</span></code> only works on the object returned by
<code class="docutils literal notranslate"><span class="pre">urlparse()</span></code> or <code class="docutils literal notranslate"><span class="pre">urlsplit()</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 urllib_parse_geturl.py

ORIG  : http://netloc/path;param?query=arg#frag
PARSED: http://netloc/path;param?query=arg#frag
</pre></div>
</div>
<p>A regular tuple containing strings can be combined into a URL with
<code class="docutils literal notranslate"><span class="pre">urlunparse()</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">urllib_parse_urlunparse.py</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">urlparse</span><span class="p">,</span> <span class="n">urlunparse</span>

<span class="n">original</span> <span class="o">=</span> <span class="s1">&#39;http://netloc/path;param?query=arg#frag&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ORIG  :&#39;</span><span class="p">,</span> <span class="n">original</span><span class="p">)</span>
<span class="n">parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">original</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;PARSED:&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">parsed</span><span class="p">),</span> <span class="n">parsed</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">parsed</span><span class="p">[:]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;TUPLE :&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="n">t</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;NEW   :&#39;</span><span class="p">,</span> <span class="n">urlunparse</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>While the <code class="docutils literal notranslate"><span class="pre">ParseResult</span></code> returned by <code class="docutils literal notranslate"><span class="pre">urlparse()</span></code> can be
used as a tuple, this example explicitly creates a new tuple to show
that <code class="docutils literal notranslate"><span class="pre">urlunparse()</span></code> works with normal tuples, too.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 urllib_parse_urlunparse.py

ORIG  : http://netloc/path;param?query=arg#frag
PARSED: &lt;class &#39;urllib.parse.ParseResult&#39;&gt;
ParseResult(scheme=&#39;http&#39;, netloc=&#39;netloc&#39;, path=&#39;/path&#39;,
params=&#39;param&#39;, query=&#39;query=arg&#39;, fragment=&#39;frag&#39;)
TUPLE : &lt;class &#39;tuple&#39;&gt; (&#39;http&#39;, &#39;netloc&#39;, &#39;/path&#39;, &#39;param&#39;,
&#39;query=arg&#39;, &#39;frag&#39;)
NEW   : http://netloc/path;param?query=arg#frag
</pre></div>
</div>
<p>If the input URL included superfluous parts, those may be dropped from the
reconstructed URL.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">urllib_parse_urlunparseextra.py</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">urlparse</span><span class="p">,</span> <span class="n">urlunparse</span>

<span class="n">original</span> <span class="o">=</span> <span class="s1">&#39;http://netloc/path;?#&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ORIG  :&#39;</span><span class="p">,</span> <span class="n">original</span><span class="p">)</span>
<span class="n">parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">original</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;PARSED:&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">parsed</span><span class="p">),</span> <span class="n">parsed</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">parsed</span><span class="p">[:]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;TUPLE :&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="n">t</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;NEW   :&#39;</span><span class="p">,</span> <span class="n">urlunparse</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>In this case, <code class="docutils literal notranslate"><span class="pre">parameters</span></code>, <code class="docutils literal notranslate"><span class="pre">query</span></code>, and <code class="docutils literal notranslate"><span class="pre">fragment</span></code> are all
missing in the original URL. The new URL does not look the same as the
original, but is equivalent according to the standard.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 urllib_parse_urlunparseextra.py

ORIG  : http://netloc/path;?#
PARSED: &lt;class &#39;urllib.parse.ParseResult&#39;&gt;
ParseResult(scheme=&#39;http&#39;, netloc=&#39;netloc&#39;, path=&#39;/path&#39;,
params=&#39;&#39;, query=&#39;&#39;, fragment=&#39;&#39;)
TUPLE : &lt;class &#39;tuple&#39;&gt; (&#39;http&#39;, &#39;netloc&#39;, &#39;/path&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;)
NEW   : http://netloc/path
</pre></div>
</div>
</div>
<div class="section" id="joining">
<h2>Joining<a class="headerlink" href="#joining" title="Permalink to this headline">¶</a></h2>
<p>In addition to parsing URLs, <code class="xref py py-mod docutils literal notranslate"><span class="pre">urlparse</span></code> includes
<code class="docutils literal notranslate"><span class="pre">urljoin()</span></code> for constructing absolute URLs from relative
fragments.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">urllib_parse_urljoin.py</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">urljoin</span>

<span class="nb">print</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="s1">&#39;http://www.example.com/path/file.html&#39;</span><span class="p">,</span>
              <span class="s1">&#39;anotherfile.html&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="s1">&#39;http://www.example.com/path/file.html&#39;</span><span class="p">,</span>
              <span class="s1">&#39;../anotherfile.html&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>In the example, the relative portion of the path (<code class="docutils literal notranslate"><span class="pre">&quot;../&quot;</span></code>) is taken
into account when the second URL is computed.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 urllib_parse_urljoin.py

http://www.example.com/path/anotherfile.html
http://www.example.com/anotherfile.html
</pre></div>
</div>
<p>Non-relative paths are handled in the same way as by
<code class="docutils literal notranslate"><span class="pre">os.path.join()</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">urllib_parse_urljoin_with_path.py</span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">urljoin</span>

<span class="nb">print</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="s1">&#39;http://www.example.com/path/&#39;</span><span class="p">,</span>
              <span class="s1">&#39;/subpath/file.html&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="s1">&#39;http://www.example.com/path/&#39;</span><span class="p">,</span>
              <span class="s1">&#39;subpath/file.html&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>If the path being joined to the URL starts with a slash (<code class="docutils literal notranslate"><span class="pre">/</span></code>), it
resets the URL’s path to the top level.  If it does not start with a
slash, it is appended to the end of the path for the URL.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 urllib_parse_urljoin_with_path.py

http://www.example.com/subpath/file.html
http://www.example.com/path/subpath/file.html
</pre></div>
</div>
</div>
<div class="section" id="encoding-query-arguments">
<span id="urllib-urlencode"></span><h2>Encoding Query Arguments<a class="headerlink" href="#encoding-query-arguments" title="Permalink to this headline">¶</a></h2>
<p>Before arguments can be added to a URL, they need to be encoded.</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">urllib_parse_urlencode.py</span><a class="headerlink" href="#id10" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">urlencode</span>

<span class="n">query_args</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;query string&#39;</span><span class="p">,</span>
    <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">encoded_args</span> <span class="o">=</span> <span class="n">urlencode</span><span class="p">(</span><span class="n">query_args</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Encoded:&#39;</span><span class="p">,</span> <span class="n">encoded_args</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Encoding replaces special characters like spaces to ensure they are
passed to the server using a format that complies with the standard.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 urllib_parse_urlencode.py

Encoded: q=query+string&amp;foo=bar
</pre></div>
</div>
<p>To pass a sequence of values using separate occurrences of the
variable in the query string, set <code class="docutils literal notranslate"><span class="pre">doseq</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> when calling
<code class="docutils literal notranslate"><span class="pre">urlencode()</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">urllib_parse_urlencode_doseq.py</span><a class="headerlink" href="#id11" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">urlencode</span>

<span class="n">query_args</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;foo1&#39;</span><span class="p">,</span> <span class="s1">&#39;foo2&#39;</span><span class="p">],</span>
<span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Single  :&#39;</span><span class="p">,</span> <span class="n">urlencode</span><span class="p">(</span><span class="n">query_args</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sequence:&#39;</span><span class="p">,</span> <span class="n">urlencode</span><span class="p">(</span><span class="n">query_args</span><span class="p">,</span> <span class="n">doseq</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>The result is a query string with several values associated with the
same name.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 urllib_parse_urlencode_doseq.py

Single  : foo=%5B%27foo1%27%2C+%27foo2%27%5D
Sequence: foo=foo1&amp;foo=foo2
</pre></div>
</div>
<p>To decode the query string, use <code class="docutils literal notranslate"><span class="pre">parse_qs()</span></code> or <code class="docutils literal notranslate"><span class="pre">parse_qsl()</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">urllib_parse_parse_qs.py</span><a class="headerlink" href="#id12" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">parse_qs</span><span class="p">,</span> <span class="n">parse_qsl</span>

<span class="n">encoded</span> <span class="o">=</span> <span class="s1">&#39;foo=foo1&amp;foo=foo2&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;parse_qs :&#39;</span><span class="p">,</span> <span class="n">parse_qs</span><span class="p">(</span><span class="n">encoded</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;parse_qsl:&#39;</span><span class="p">,</span> <span class="n">parse_qsl</span><span class="p">(</span><span class="n">encoded</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>The return value from <code class="docutils literal notranslate"><span class="pre">parse_qs()</span></code> is a dictionary mapping names
to values, while <code class="docutils literal notranslate"><span class="pre">parse_qsl()</span></code> returns a list of tuples containing
a name and a value.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 urllib_parse_parse_qs.py

parse_qs : {&#39;foo&#39;: [&#39;foo1&#39;, &#39;foo2&#39;]}
parse_qsl: [(&#39;foo&#39;, &#39;foo1&#39;), (&#39;foo&#39;, &#39;foo2&#39;)]
</pre></div>
</div>
<p>Special characters within the query arguments that might cause parse
problems with the URL on the server side are “quoted” when passed to
<code class="docutils literal notranslate"><span class="pre">urlencode()</span></code>. To quote them locally to make safe versions of
the strings, use the <code class="docutils literal notranslate"><span class="pre">quote()</span></code> or <code class="docutils literal notranslate"><span class="pre">quote_plus()</span></code> functions
directly.</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">urllib_parse_quote.py</span><a class="headerlink" href="#id13" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">quote</span><span class="p">,</span> <span class="n">quote_plus</span><span class="p">,</span> <span class="n">urlencode</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:8080/~hellmann/&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;urlencode() :&#39;</span><span class="p">,</span> <span class="n">urlencode</span><span class="p">({</span><span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">url</span><span class="p">}))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;quote()     :&#39;</span><span class="p">,</span> <span class="n">quote</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;quote_plus():&#39;</span><span class="p">,</span> <span class="n">quote_plus</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>The quoting implementation in <code class="docutils literal notranslate"><span class="pre">quote_plus()</span></code> is more aggressive
about the characters it replaces.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 urllib_parse_quote.py

urlencode() : url=http%3A%2F%2Flocalhost%3A8080%2F~hellmann%2F
quote()     : http%3A//localhost%3A8080/~hellmann/
quote_plus(): http%3A%2F%2Flocalhost%3A8080%2F~hellmann%2F
</pre></div>
</div>
<p>To reverse the quote operations, use <code class="docutils literal notranslate"><span class="pre">unquote()</span></code> or
<code class="docutils literal notranslate"><span class="pre">unquote_plus()</span></code>, as appropriate.</p>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">urllib_parse_unquote.py</span><a class="headerlink" href="#id14" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">unquote</span><span class="p">,</span> <span class="n">unquote_plus</span>

<span class="nb">print</span><span class="p">(</span><span class="n">unquote</span><span class="p">(</span><span class="s1">&#39;http%3A//localhost%3A8080/</span><span class="si">%7E</span><span class="s1">hellmann/&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unquote_plus</span><span class="p">(</span>
    <span class="s1">&#39;http%3A</span><span class="si">%2F%2F</span><span class="s1">localhost%3A8080</span><span class="si">%2F%7E</span><span class="s1">hellmann</span><span class="si">%2F</span><span class="s1">&#39;</span>
<span class="p">))</span>
</pre></div>
</div>
</div>
<p>The encoded value is converted back to a normal string URL.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 urllib_parse_unquote.py

http://localhost:8080/~hellmann/
http://localhost:8080/~hellmann/
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference external" href="https://docs.python.org/3.7/library/urllib.parse.html">Standard library documentation for urllib.parse</a></li>
<li><a class="reference internal" href="../urllib.request/index.html#module-urllib.request" title="urllib.request: Network Resource Access"><code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib.request</span></code></a> – Retrieve the contents of a resource
identified by a URL.</li>
<li><span class="target" id="index-1"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc1738.html"><strong>RFC 1738</strong></a> – Uniform Resource Locator (URL) syntax</li>
<li><span class="target" id="index-2"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc1808.html"><strong>RFC 1808</strong></a> – Relative URLs</li>
<li><span class="target" id="index-3"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2396.html"><strong>RFC 2396</strong></a> – Uniform Resource Identifier (URI) generic syntax</li>
<li><span class="target" id="index-4"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc3986.html"><strong>RFC 3986</strong></a> – Uniform Resource Identifier (URI) syntax</li>
</ul>
</div>
</div>
</div>



        <div id="footer-nav">
<a id="prev-link" href="../internet_protocols.html"
   title="previous chapter"><i class="fa fa-arrow-circle-left"></i> The Internet</a>
<a id="next-link" href="../urllib.request/index.html"
   title="next chapter">urllib.request — Network Resource Access <i class="fa fa-arrow-circle-right"></i></a>
        </div>

        </div>
      </div>

      <div class="pure-u-1-4">
        <div class="sidebar-wrapper">
          <div class="sidebar">
<div id="sidebar-toc">
  <h5>Quick Links</h5>
  <ul>
    
    <li><a href="#parsing"><i class="fa fa-caret-right"></i>Parsing</a></li>
    
    <li><a href="#unparsing"><i class="fa fa-caret-right"></i>Unparsing</a></li>
    
    <li><a href="#joining"><i class="fa fa-caret-right"></i>Joining</a></li>
    
    <li><a href="#encoding-query-arguments"><i class="fa fa-caret-right"></i>Encoding Query Arguments</a></li>
    
  </ul>
</div>

          </div>
          <div class="sidebar"><div id="sidebar-last-updated">
  This page was last updated 2018-12-09.
</div>

          </div>
          <div class="sidebar">
<div id="sidebar-nav">
  <h5>Navigation</h5>
  <ul>
    <li><a href="../internet_protocols.html"
           title="previous chapter"><i class="fa fa-arrow-circle-left"></i>The Internet</a></li>
    <li><a href="../urllib.request/index.html"
           title="next chapter"><i class="fa fa-arrow-circle-right"></i>urllib.request — Network Resource Access</a></li>
  </ul>
</div>
          </div>
          <div class="sidebar"><div id="sidebar-book"><a target="new" href="https://doughellmann.com/books/the-python-3-standard-library-by-example/"><img src="../_static/book-cover-image-med.jpg"><br>Get the book</a></div>
          </div>
          <div class="sidebar"><div id="sidebar-example-disclaimer">
<p>The output from all the example programs
from PyMOTW-3 has been generated with Python 3.7.9, unless
otherwise noted. Some of the features described here may not be
available in earlier versions of Python.</p>
<p>Looking for <a href="/2/">examples for Python 2</a>?</p>
</div>
          </div>

        </div>
      </div>

    </div>

    <div class="pure-g-r" id="footer">

      <div class="pure-u-1-3">
        <div class="footer-list">
            <h4>This Site</h4>
            <ul>
              <li><a href="../py-modindex.html"><i class="fa fa-list fa-lg"></i> Module Index</a></li>
              <li><a href="../genindex.html"><i class="fa fa-italic fa-lg"></i> Index</a></li>
            </ul>
        </div>
      </div><div class="pure-u-1-3">
          <div class="footer-content">
            <div class="socialmedia">
              <a class="sociallink" href="../index.html"
       title="Home">
      <i class="fa fa-home fa-lg"></i></a>
              <a class="sociallink" href="../about.html"
       title="About">
      <i class="fa fa-user fa-lg"></i></a>
              <a class="sociallink" href="http://www.twitter.com/pymotw"
       title="Twitter">
      <i class="fa fa-twitter fa-lg"></i></a>
              <a class="sociallink" href="https://feeds.feedburner.com/PyMOTW"
       title="Subscribe via RSS">
      <i class="fa fa-rss-square fa-lg"></i></a>
              <a class="sociallink" href="http://feedburner.google.com/fb/a/mailverify?uri=PyMOTW&amp;loc=en_US"
       title="Subscribe via Email">
      <i class="fa fa-envelope fa-lg"></i></a>
            </div>

            <div class="copyright">
              <a rel="author" href="../about.html">&copy; Copyright 2021, Doug Hellmann</a>
            </div>

            <div class="cc"><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.en_US" rel="license"><img alt="Creative Commons License BY-NC-SA" style="border-width:0; align: center;" width="88" height="31" src="data:image/png;base64,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"/></a>
            </div>

          </div></div><div class="pure-u-1-3">
          <div class="footer-list">
            <h4>Other Writing</h4>
            <ul>
              <li><a href="https://doughellmann.com/"><i class="fa fa-pencil fa-lg"></i> Blog</a></li>
              <li><a href="https://doughellmann.com/books/the-python-3-standard-library-by-example/"><i class="fa fa-book fa-lg"></i> The Python Standard Library By Example</a></li>
            </ul>
          </div>
        </div><script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38546875-3', 'pymotw.com');
  ga('send', 'pageview');
</script>

  </body>
</html>