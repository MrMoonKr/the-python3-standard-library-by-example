<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>site — Site-wide Configuration &mdash; PyMOTW 3</title>

    <link rel="stylesheet" href="../_static/pure-min.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/font-awesome/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pymotw.css" type="text/css">

    <link rel="shortcut icon" type="image/png" href="../_static/favicon.png">

    <link rel="alternate" type="application/atom+xml"
          title="Doug Hellmann"
          href="https://feeds.feedburner.com/DougHellmann" />
    <link rel="alternate" type="application/atom+xml"
          title="PyMOTW Updates"
          href="https://feeds.feedburner.com/PyMOTW" />

    <meta name="verify-v1" content="5saTcOa2HLac4V85yUg3SARfun1PqT5Upu7IR/6fpv4="/>

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@pymotw" />
    <meta name="twitter:title" content="site — Site-wide Configuration" />
    <meta name="twitter:image" content="https://pymotw.com/3/_static/logo-large.png" />

  </head>
  <body>

    <div class="pure-menu pure-menu-open pure-menu-horizontal" id="site-menu">
      <a class="pure-menu-heading" href="../index.html"><img src="../_static/logo.png"> PyMOTW-3</a>

      <ul id="top-menu">
        <li class="pure-menu-selected"><a href="../py-modindex.html"><i class="fa fa-list fa-lg"></i> Module Index</a></li>
        <li class="pure-menu-selected"><a href="../genindex.html"><i class="fa fa-italic fa-lg"></i> Index</a></li>
        <li class="pure-menu-selected"><a class="sociallink" href="http://www.twitter.com/pymotw"
       title="Twitter">
      <i class="fa fa-twitter fa-lg"></i></a></a>
        <li class="pure-menu-selected"><a class="sociallink" href="https://feeds.feedburner.com/PyMOTW"
       title="Subscribe via RSS">
      <i class="fa fa-rss-square fa-lg"></i></a></li>
      </ul>

    </div>

    <div class="pure-menu pure-menu-open pure-menu-vertical" id="breadcrumbs-menu">
      
      <ul id="breadcrumbs">
        <li class="pure-menu-selected"><a href="../runtime_services.html"><i class="fa fa-arrow-circle-up"></i> Runtime Features</a></li>
      </ul>
    </div>

    <div class="pure-g-r" id="content-container">

      <div class="pure-u-3-4">
        <div class="content">
          
  <div class="section" id="module-site">
<span id="site-site-wide-configuration"></span><h1>site — Site-wide Configuration<a class="headerlink" href="#module-site" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">site</span></code> module handles site-specific configuration, especially
the import path.</p>
<div class="section" id="import-path">
<h2>Import Path<a class="headerlink" href="#import-path" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">site</span></code> is automatically imported each time the interpreter starts
up.  On import, it extends <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> with site-specific names
constructed by combining the prefix values <code class="docutils literal notranslate"><span class="pre">sys.prefix</span></code> and
<code class="docutils literal notranslate"><span class="pre">sys.exec_prefix</span></code> with several suffixes.  The prefix values used
are saved in the module-level variable <code class="docutils literal notranslate"><span class="pre">PREFIXES</span></code> for reference
later.  Under Windows, the suffixes are an empty string and
<code class="docutils literal notranslate"><span class="pre">lib/site-packages</span></code>.  For Unix-like platforms, the values are
<code class="docutils literal notranslate"><span class="pre">lib/python$version/site-packages</span></code> (where <code class="docutils literal notranslate"><span class="pre">$version</span></code> is replaced
by the major and minor version number of the interpreter, such as
<code class="docutils literal notranslate"><span class="pre">3.5</span></code>) and <code class="docutils literal notranslate"><span class="pre">lib/site-python</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">site_import_path.py</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">site</span>

<span class="k">if</span> <span class="s1">&#39;Windows&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="p">:</span>
    <span class="n">SUFFIXES</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;lib/site-packages&#39;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">SUFFIXES</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;lib/python</span><span class="si">{}</span><span class="s1">/site-packages&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="p">[:</span><span class="mi">3</span><span class="p">]),</span>
        <span class="s1">&#39;lib/site-python&#39;</span><span class="p">,</span>
    <span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Path prefixes:&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">site</span><span class="o">.</span><span class="n">PREFIXES</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

<span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">site</span><span class="o">.</span><span class="n">PREFIXES</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">SUFFIXES</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">suffix</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">suffix</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   exists :&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   in path:&#39;</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Each of the paths resulting from the combinations is tested, and those
that exist are added to <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>.  This output shows the
framework version of Python installed on a Mac OS X system.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 site_import_path.py

Path prefixes:
   /Library/Frameworks/Python.framework/Versions/3.5
   /Library/Frameworks/Python.framework/Versions/3.5

/Library/Frameworks/Python.framework/Versions/3.5

  lib/python3.5/site-packages
   exists : True
   in path: True

  lib/site-python
   exists : False
   in path: False
</pre></div>
</div>
</div>
<div class="section" id="user-directories">
<h2>User Directories<a class="headerlink" href="#user-directories" title="Permalink to this headline">¶</a></h2>
<p>In addition to the global site-packages paths, <code class="docutils literal notranslate"><span class="pre">site</span></code> is
responsible for adding the user-specific locations to the import path.
The user-specific paths are all based on the <code class="docutils literal notranslate"><span class="pre">USER_BASE</span></code>
directory, which usually located in a part of the file system owned
(and writable) by the current user. Inside the <code class="docutils literal notranslate"><span class="pre">USER_BASE</span></code>
directory is a <code class="docutils literal notranslate"><span class="pre">site-packages</span></code> directory, with the path accessible
as <code class="docutils literal notranslate"><span class="pre">USER_SITE</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">site_user_base.py</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">site</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Base:&#39;</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">USER_BASE</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Site:&#39;</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">USER_SITE</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">USER_SITE</span></code> path name is created using the same
platform-specific suffix values described earlier.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 site_user_base.py

Base: /Users/dhellmann/.local
Site: /Users/dhellmann/.local/lib/python3.7/site-packages
</pre></div>
</div>
<p>The user base directory can be set through the <code class="docutils literal notranslate"><span class="pre">PYTHONUSERBASE</span></code>
environment variable, and has platform-specific defaults
(<code class="docutils literal notranslate"><span class="pre">~/Python$version/site-packages</span></code> for Windows and <code class="docutils literal notranslate"><span class="pre">~/.local</span></code> for
non-Windows).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ PYTHONUSERBASE=/tmp/$USER python3 site_user_base.py

Base: /tmp/dhellmann
Site: /tmp/dhellmann/lib/python3.7/site-packages
</pre></div>
</div>
<p>The user directory is disabled under some circumstances that would
pose security issues (for example, if the process is running with a
different effective user or group id than the actual user that started
it).  An application can check the setting by examining
<code class="docutils literal notranslate"><span class="pre">ENABLE_USER_SITE</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">site_enable_user_site.py</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">site</span>

<span class="n">status</span> <span class="o">=</span> <span class="p">{</span>
    <span class="kc">None</span><span class="p">:</span> <span class="s1">&#39;Disabled for security&#39;</span><span class="p">,</span>
    <span class="kc">True</span><span class="p">:</span> <span class="s1">&#39;Enabled&#39;</span><span class="p">,</span>
    <span class="kc">False</span><span class="p">:</span> <span class="s1">&#39;Disabled by command-line option&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Flag   :&#39;</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">ENABLE_USER_SITE</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Meaning:&#39;</span><span class="p">,</span> <span class="n">status</span><span class="p">[</span><span class="n">site</span><span class="o">.</span><span class="n">ENABLE_USER_SITE</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>The user directory can also be explicitly disabled on the command line
with <code class="docutils literal notranslate"><span class="pre">-s</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 site_enable_user_site.py

Flag   : True
Meaning: Enabled

$ python3 -s site_enable_user_site.py

Flag   : False
Meaning: Disabled by command-line option
</pre></div>
</div>
</div>
<div class="section" id="path-configuration-files">
<h2>Path Configuration Files<a class="headerlink" href="#path-configuration-files" title="Permalink to this headline">¶</a></h2>
<p>As paths are added to the import path, they are also scanned for <em>path
configuration files</em>.  A path configuration file is a plain text file
with the extension <code class="docutils literal notranslate"><span class="pre">.pth</span></code>.  Each line in the file can take one of
four forms.</p>
<ul class="simple">
<li>A full or relative path to another location that should be added to
the import path.</li>
<li>A Python statement to be executed.  All such lines must begin with
an <code class="docutils literal notranslate"><span class="pre">import</span></code> statement.</li>
<li>Blank lines are ignored.</li>
<li>A line starting with <code class="docutils literal notranslate"><span class="pre">#</span></code> is treated as a comment and ignored.</li>
</ul>
<p>Path configuration files can be used to extend the import path to look
in locations that would not have been added automatically.  For
example, the <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> package adds a path to
<code class="docutils literal notranslate"><span class="pre">easy-install.pth</span></code> when it installs a package in development mode
using <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span></code>.</p>
<p>The function for extending <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> is public, and it can be used
in example programs to show how the path configuration files work.
Given a directory named <code class="docutils literal notranslate"><span class="pre">with_modules</span></code> containing the file <code class="docutils literal notranslate"><span class="pre">mymodule.py</span></code>
with this <code class="docutils literal notranslate"><span class="pre">print</span></code> statement showing how the module was imported:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">with_modules/mymodule.py</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Loaded </span><span class="si">{}</span><span class="s1"> from </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="vm">__name__</span><span class="p">,</span> <span class="vm">__file__</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:])</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>This script shows how <code class="docutils literal notranslate"><span class="pre">addsitedir()</span></code> extends the import path so
the interpreter can find the desired module.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">site_addsitedir.py</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">site</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">script_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
<span class="n">module_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">script_directory</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">mymodule</span>
<span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Could not import mymodule:&#39;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>

<span class="nb">print</span><span class="p">()</span>
<span class="n">before_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="n">site</span><span class="o">.</span><span class="n">addsitedir</span><span class="p">(</span><span class="n">module_directory</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;New paths:&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="n">before_len</span><span class="p">:]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s1">&#39;.&#39;</span><span class="p">))</span>  <span class="c1"># shorten dirname</span>

<span class="nb">print</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">mymodule</span>
</pre></div>
</div>
</div>
<p>After the directory containing the module is added
to <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>, the script can import <code class="docutils literal notranslate"><span class="pre">mymodule</span></code> without
issue.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 site_addsitedir.py with_modules

Could not import mymodule: No module named &#39;mymodule&#39;

New paths:
./with_modules

Loaded mymodule from with_modules/mymodule.py
</pre></div>
</div>
<p>The path changes by <code class="docutils literal notranslate"><span class="pre">addsitedir()</span></code> go beyond simply appending the
argument to <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>.  If the directory given to
<code class="docutils literal notranslate"><span class="pre">addsitedir()</span></code> includes any files matching the pattern <code class="docutils literal notranslate"><span class="pre">*.pth</span></code>,
they are loaded as path configuration files. Given a directory
structure like the following</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>with_pth
├── pymotw.pth
└── subdir
    └── mymodule.py
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">with_pth/pymotw.pth</span></code> contains</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add a single subdirectory to the path.</span>
<span class="o">./</span><span class="n">subdir</span>
</pre></div>
</div>
<p>then <code class="docutils literal notranslate"><span class="pre">with_pth/subdir/mymodule.py</span></code> can be imported by adding
<code class="docutils literal notranslate"><span class="pre">with_pth</span></code> as a site directory, even though the module is not in
that directory because both <code class="docutils literal notranslate"><span class="pre">with_pth</span></code> and <code class="docutils literal notranslate"><span class="pre">with_pth/subdir</span></code> are
added to the import path.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 site_addsitedir.py with_pth

Could not import mymodule: No module named &#39;mymodule&#39;

New paths:
./with_pth
./with_pth/subdir

Loaded mymodule from with_pth/subdir/mymodule.py
</pre></div>
</div>
<p>If a site directory contains multiple <code class="docutils literal notranslate"><span class="pre">.pth</span></code> files, they are
processed in alphabetical order.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ls -F multiple_pth

a.pth
b.pth
from_a/
from_b/

$ cat multiple_pth/a.pth

./from_a

$ cat multiple_pth/b.pth

./from_b
</pre></div>
</div>
<p>In this case, the module is found in <code class="docutils literal notranslate"><span class="pre">multiple_pth/from_a</span></code>
because <code class="docutils literal notranslate"><span class="pre">a.pth</span></code> is read before <code class="docutils literal notranslate"><span class="pre">b.pth</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 site_addsitedir.py multiple_pth

Could not import mymodule: No module named &#39;mymodule&#39;

New paths:
./multiple_pth
./multiple_pth/from_a
./multiple_pth/from_b

Loaded mymodule from multiple_pth/from_a/mymodule.py
</pre></div>
</div>
<span class="target" id="module-sitecustomize"></span></div>
<div class="section" id="customizing-site-configuration">
<h2>Customizing Site Configuration<a class="headerlink" href="#customizing-site-configuration" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">site</span></code> module is also responsible for loading site-wide
customization defined by the local site owner in a
<code class="docutils literal notranslate"><span class="pre">sitecustomize</span></code> module.  Uses for <code class="docutils literal notranslate"><span class="pre">sitecustomize</span></code> include
extending the import path and enabling coverage,
profiling, or other development tools.</p>
<p>For example, this <code class="docutils literal notranslate"><span class="pre">sitecustomize.py</span></code> script extends the import path
with a directory based on the current platform.  The platform-specific
path in <code class="docutils literal notranslate"><span class="pre">/opt/python</span></code> is added to the import path, so any packages
installed there can be imported.  A system like this is useful for
sharing packages containing compiled extension modules between hosts
on a network via a shared file system.  Only the <code class="docutils literal notranslate"><span class="pre">sitecustomize.py</span></code>
script needs to be installed on each host, and the other packages can
be accessed from the file server.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">with_sitecustomize/sitecustomize.py</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Loading sitecustomize.py&#39;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">site</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;/opt&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;python&#39;</span><span class="p">,</span>
                    <span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span>
                    <span class="n">platform</span><span class="o">.</span><span class="n">platform</span><span class="p">(),</span>
                    <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Adding new path&#39;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>

<span class="n">site</span><span class="o">.</span><span class="n">addsitedir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>A simple script can be used to show that <code class="docutils literal notranslate"><span class="pre">sitecustomize.py</span></code> is
imported before Python starts running your own code.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">with_sitecustomize/site_sitecustomize.py</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Running main program from</span><span class="se">\n</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;End of path:&#39;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>Since <code class="docutils literal notranslate"><span class="pre">sitecustomize</span></code> is meant for system-wide configuration, it
should be installed somewhere in the default path (usually in the
<code class="docutils literal notranslate"><span class="pre">site-packages</span></code> directory).  This example sets <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>
explicitly to ensure the module is picked up.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ PYTHONPATH=with_sitecustomize python3 with_sitecustomize/sit\
e_sitecustomize.py

Loading sitecustomize.py
Adding new path /opt/python/3.7/Darwin-18.0.0-x86_64-i386-64bit
Running main program from
with_sitecustomize/site_sitecustomize.py
End of path: /opt/python/3.7/Darwin-18.0.0-x86_64-i386-64bit
</pre></div>
</div>
<span class="target" id="module-usercustomize"></span></div>
<div class="section" id="customizing-user-configuration">
<h2>Customizing User Configuration<a class="headerlink" href="#customizing-user-configuration" title="Permalink to this headline">¶</a></h2>
<p>Similar to <code class="docutils literal notranslate"><span class="pre">sitecustomize</span></code>, the <code class="docutils literal notranslate"><span class="pre">usercustomize</span></code> module can
be used to set up user-specific settings each time the interpreter
starts up.  <code class="docutils literal notranslate"><span class="pre">usercustomize</span></code> is loaded after <code class="docutils literal notranslate"><span class="pre">sitecustomize</span></code>,
so site-wide customizations can be overridden.</p>
<p>In environments where a user’s home directory is shared on several
servers running different operating systems or versions, the standard
user directory mechanism may not work for user-specific installations
of packages.  In these cases, a platform-specific directory tree can be
used instead.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">with_usercustomize/usercustomize.py</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Loading usercustomize.py&#39;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">site</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">,</span>
                                       <span class="s1">&#39;python&#39;</span><span class="p">,</span>
                                       <span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span>
                                       <span class="n">platform</span><span class="o">.</span><span class="n">platform</span><span class="p">(),</span>
                                       <span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Adding new path&#39;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>

<span class="n">site</span><span class="o">.</span><span class="n">addsitedir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Another simple script, similar to the one used for
<code class="docutils literal notranslate"><span class="pre">sitecustomize</span></code>, can be used to show that <code class="docutils literal notranslate"><span class="pre">usercustomize.py</span></code> is
imported before Python starts running other code.</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">with_usercustomize/site_usercustomize.py</span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Running main program from</span><span class="se">\n</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;End of path:&#39;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>Since <code class="docutils literal notranslate"><span class="pre">usercustomize</span></code> is meant for user-specific configuration
for a user, it should be installed somewhere in the user’s default
path, but not on the site-wide path. The default <code class="docutils literal notranslate"><span class="pre">USER_BASE</span></code>
directory is a good location.  This example sets <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>
explicitly to ensure the module is picked up.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ PYTHONPATH=with_usercustomize python3 with_usercustomize/site\
_usercustomize.py

Loading usercustomize.py
Adding new path /Users/dhellmann/python/3.5/Darwin-15.5.0-x86_64\
-i386-64bit
Running main program from
with_usercustomize/site_usercustomize.py
End of path: /Users/dhellmann/python/3.5/Darwin-15.5.0-x86_64\
-i386-64bit
</pre></div>
</div>
<p>When the user site directory feature is disabled, <code class="docutils literal notranslate"><span class="pre">usercustomize</span></code>
is not imported, whether it is located in the user site directory or
elsewhere.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ PYTHONPATH=with_usercustomize python3 -s with_usercustomize/s\
ite_usercustomize.py

Running main program from
with_usercustomize/site_usercustomize.py
End of path: /Users/dhellmann/Envs/pymotw35/lib/python3.5/site-
packages
</pre></div>
</div>
</div>
<div class="section" id="disabling-the-site-module">
<h2>Disabling the site Module<a class="headerlink" href="#disabling-the-site-module" title="Permalink to this headline">¶</a></h2>
<p>To maintain backwards-compatibility with versions of Python from
before the automatic import was added, the interpreter accepts an
<code class="docutils literal notranslate"><span class="pre">-S</span></code> option.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 -S site_import_path.py

Path prefixes:
   /Users/dhellmann/Envs/pymotw37/bin/..
   /Users/dhellmann/Envs/pymotw37/bin/..

/Users/dhellmann/Envs/pymotw37/bin/..

  lib/python3.7/site-packages
   exists : True
   in path: False

  lib/site-python
   exists : False
   in path: False
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference external" href="https://docs.python.org/3.7/library/site.html">Standard library documentation for site</a></li>
<li><a class="reference internal" href="../sys/imports.html#sys-imports"><span class="std std-ref">Modules and Imports</span></a> – Description of how the import path defined
in <code class="docutils literal notranslate"><span class="pre">sys</span></code> works.</li>
<li><a class="reference external" href="https://setuptools.readthedocs.io/en/latest/index.html">setuptools</a> –
Packaging library and installation tool <code class="docutils literal notranslate"><span class="pre">easy_install</span></code>.</li>
<li><a class="reference external" href="http://nedbatchelder.com/blog/201001/running_code_at_python_startup.html">Running code at Python startup</a>
– Post from Ned Batchelder discussing ways to cause the Python
interpreter to run custom initialization code before starting the
main program execution.</li>
</ul>
</div>
</div>
</div>



        <div id="footer-nav">
<a id="prev-link" href="../runtime_services.html"
   title="previous chapter"><i class="fa fa-arrow-circle-left"></i> Runtime Features</a>
<a id="next-link" href="../sys/index.html"
   title="next chapter">sys — System-specific Configuration <i class="fa fa-arrow-circle-right"></i></a>
        </div>

        </div>
      </div>

      <div class="pure-u-1-4">
        <div class="sidebar-wrapper">
          <div class="sidebar">
<div id="sidebar-toc">
  <h5>Quick Links</h5>
  <ul>
    
    <li><a href="#import-path"><i class="fa fa-caret-right"></i>Import Path</a></li>
    
    <li><a href="#user-directories"><i class="fa fa-caret-right"></i>User Directories</a></li>
    
    <li><a href="#path-configuration-files"><i class="fa fa-caret-right"></i>Path Configuration Files</a></li>
    
    <li><a href="#customizing-site-configuration"><i class="fa fa-caret-right"></i>Customizing Site Configuration</a></li>
    
    <li><a href="#customizing-user-configuration"><i class="fa fa-caret-right"></i>Customizing User Configuration</a></li>
    
    <li><a href="#disabling-the-site-module"><i class="fa fa-caret-right"></i>Disabling the site Module</a></li>
    
  </ul>
</div>

          </div>
          <div class="sidebar"><div id="sidebar-last-updated">
  This page was last updated 2018-12-09.
</div>

          </div>
          <div class="sidebar">
<div id="sidebar-nav">
  <h5>Navigation</h5>
  <ul>
    <li><a href="../runtime_services.html"
           title="previous chapter"><i class="fa fa-arrow-circle-left"></i>Runtime Features</a></li>
    <li><a href="../sys/index.html"
           title="next chapter"><i class="fa fa-arrow-circle-right"></i>sys — System-specific Configuration</a></li>
  </ul>
</div>
          </div>
          <div class="sidebar"><div id="sidebar-book"><a target="new" href="https://doughellmann.com/books/the-python-3-standard-library-by-example/"><img src="../_static/book-cover-image-med.jpg"><br>Get the book</a></div>
          </div>
          <div class="sidebar"><div id="sidebar-example-disclaimer">
<p>The output from all the example programs
from PyMOTW-3 has been generated with Python 3.7.9, unless
otherwise noted. Some of the features described here may not be
available in earlier versions of Python.</p>
<p>Looking for <a href="/2/">examples for Python 2</a>?</p>
</div>
          </div>

        </div>
      </div>

    </div>

    <div class="pure-g-r" id="footer">

      <div class="pure-u-1-3">
        <div class="footer-list">
            <h4>This Site</h4>
            <ul>
              <li><a href="../py-modindex.html"><i class="fa fa-list fa-lg"></i> Module Index</a></li>
              <li><a href="../genindex.html"><i class="fa fa-italic fa-lg"></i> Index</a></li>
            </ul>
        </div>
      </div><div class="pure-u-1-3">
          <div class="footer-content">
            <div class="socialmedia">
              <a class="sociallink" href="../index.html"
       title="Home">
      <i class="fa fa-home fa-lg"></i></a>
              <a class="sociallink" href="../about.html"
       title="About">
      <i class="fa fa-user fa-lg"></i></a>
              <a class="sociallink" href="http://www.twitter.com/pymotw"
       title="Twitter">
      <i class="fa fa-twitter fa-lg"></i></a>
              <a class="sociallink" href="https://feeds.feedburner.com/PyMOTW"
       title="Subscribe via RSS">
      <i class="fa fa-rss-square fa-lg"></i></a>
              <a class="sociallink" href="http://feedburner.google.com/fb/a/mailverify?uri=PyMOTW&amp;loc=en_US"
       title="Subscribe via Email">
      <i class="fa fa-envelope fa-lg"></i></a>
            </div>

            <div class="copyright">
              <a rel="author" href="../about.html">&copy; Copyright 2021, Doug Hellmann</a>
            </div>

            <div class="cc"><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.en_US" rel="license"><img alt="Creative Commons License BY-NC-SA" style="border-width:0; align: center;" width="88" height="31" src="data:image/png;base64,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"/></a>
            </div>

          </div></div><div class="pure-u-1-3">
          <div class="footer-list">
            <h4>Other Writing</h4>
            <ul>
              <li><a href="https://doughellmann.com/"><i class="fa fa-pencil fa-lg"></i> Blog</a></li>
              <li><a href="https://doughellmann.com/books/the-python-3-standard-library-by-example/"><i class="fa fa-book fa-lg"></i> The Python Standard Library By Example</a></li>
            </ul>
          </div>
        </div><script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38546875-3', 'pymotw.com');
  ga('send', 'pageview');
</script>

  </body>
</html>